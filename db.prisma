model Tenant {
    id           String        @id @default(uuid())
    name         String
    slug         String        @unique
    subscription Subscription?
    createdAt    DateTime      @default(now())
    updatedAt    DateTime      @updatedAt
    users        User[]
    sites        Site[]
}

model User {
    id        String   @id @default(uuid())
    tenantId  String
    tenant    Tenant   @relation(fields: [tenantId], references: [id])
    name      String
    email     String   @unique
    password  String
    role      Role     @default(USER)
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}

enum Role {
    ADMIN
    EDITOR
    VIEWER
}

model Site {
    id        String           @id @default(uuid())
    tenantId  String
    tenant    Tenant           @relation(fields: [tenantId], references: [id])
    name      String
    slug      String
    domain    String? // custom domain
    theme     String? // default theme/template
    pages     Page[]
    plugins   PluginInstance[]
    createdAt DateTime         @default(now())
    updatedAt DateTime         @updatedAt
}

model Page {
    id        String     @id @default(uuid())
    siteId    String
    site      Site       @relation(fields: [siteId], references: [id])
    title     String
    slug      String
    content   Json // JSON structure of components
    status    PageStatus @default(DRAFT)
    seo       Json? // meta tags, description
    createdAt DateTime   @default(now())
    updatedAt DateTime   @updatedAt
}

enum PageStatus {
    DRAFT
    PUBLISHED
    ARCHIVED
}

model Component {
    id        String   @id @default(uuid())
    name      String
    type      String // Hero, Form, Gallery, CustomPlugin
    props     Json // default props, configurable
    pluginId  String? // optional if provided by plugin
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}
